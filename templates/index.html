<!DOCTYPE html>
<html>
<head>
    <title>ESP32 Control</title>
</head>
<body>
    <h1>Home Radar main page</h1>
    <br>
    <form action="/buttonPressed" method="get">
        <button type="submit">Activate the alarm</button>
    </form>
    <br>
    <h2>Current temperature and humidity in your home:</h2>
    <p id="temperatureValue">{{ temperature }} celcius</p>
    <p id="humidityValue">{{ humidity }} %</p>

    <a href="/gallery">View Image Gallery</a>


    <script>
        // Function to update the displayed value using AJAX
        function updateValue() {
            // Create a new XMLHttpRequest object
            var xhttp = new XMLHttpRequest();

            // Define the function to handle the response
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    // Update the displayed value
                    var values = JSON.parse(this.responseText);
                    document.getElementById('temperatureValue').textContent = values.temp+" celsius";
                    document.getElementById('humidityValue').textContent = values.humi+" %";
                }
            };

            // Open a GET request to the Flask server endpoint
            xhttp.open("GET", "/get_value", true);

            // Send the request
            xhttp.send();
        }

        // Call the updateValue function every 5 seconds (adjust as needed)
        setInterval(updateValue, 5000);
    </script>
</body>
</html>